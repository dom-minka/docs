---
title: "Como enviar cuenta a cuenta"
description: "Guia sobre transferencias cuenta a cuenta usando Transfiya"
icon: 'vault'
---


Para soportar los modelos de transferencia en Transfiya para Empresas, es necesario permitir la referencia directa a cuentas bancarias en los campos `source` y `target` de cada transacci√≥n. La estructura de estas referencias debe contener informaci√≥n sobre el tipo de cuenta, el n√∫mero de cuenta y el banco al cual pertenece.

## üìå Sintaxis de Referencia


- **accountType**: tipo de cuenta (en min√∫sculas), basado en los valores est√°ndar de Transfiya.
- **accountNumber**: n√∫mero de cuenta bancaria (coincide con `labels.bankAccountNumber` del firmante).
- **bankReference**: dominio DNS v√°lido del banco receptor.

<Info>
Este formato unificado garantiza consistencia y compatibilidad con los mecanismos de enrutamiento de Transfiya, facilitando la interoperabilidad entre participantes.
</Info>

## üè¶ Tipos de Cuenta Soportados

A continuaci√≥n se listan los tipos de cuenta reconocidos en Transfiya:

| Nombre                     | Valor |
|---------------------------|--------|
| Cuenta de ahorros         | `svgs` |
| Cuenta corriente          | `cacc` |
| Dep√≥sito de bajo monto    | `dbmo` |
| Dep√≥sito ordinario        | `dord` |
| Dep√≥sito inclusivo bajo monto | `dbmi` |

<Tip>
Estos valores deben utilizarse exclusivamente en min√∫sculas y reflejan el tipo de cuenta real registrada por el firmante en el sistema financiero.
</Tip>

## üåê Referencia Bancaria

El identificador del banco (`bankReference`) debe ser un dominio DNS v√°lido, que permita una resoluci√≥n clara y √∫nica del participante receptor.


## ‚úÖ Ejemplo de referencia v√°lida

svgs:10010010001@bancodebogota.co


Transferencias cuenta a cuenta con y sin signer de tipo cuenta
<Info>
Cuando el usuario receptor ya est√° registrado en TransfiYa, la transferencia se acepta autom√°ticamente tras la validaci√≥n de reglas y ejecuci√≥n del d√©bito.
Sin embargo, si el usuario a√∫n no est√° registrado, el flujo requiere una etapa adicional de onboarding:

TransfiYa notifica al banco destino que existe una transferencia pendiente.

El banco destino debe validar los datos y crear el firmante (usuario).

Una vez completado el onboarding, el banco acepta la transferencia manualmente.

</Info>
Esta diferencia impacta directamente en los tiempos de procesamiento y en la l√≥gica de integraci√≥n de los participantes, ya que se introduce una validaci√≥n activa del banco destino antes de continuar con las siguientes fases (acci√≥n, cr√©dito y estado).




<Tabs>
    <Tab title="Flujo con Signer Registrado">
```mermaid
sequenceDiagram
  autonumber
  participant sb as Banco Origen
  participant ty as TransfiYa
  participant tb as Banco Destino

  sb ->>+ ty: Crear transferencia
  ty ->> ty: Validar reglas de negocio
  ty -->>- sb: Transferencia creada

  alt D√©bito (as√≠ncrono)
    ty ->>+ sb: Llamar a d√©bito
    sb ->> sb: Procesar d√©bito
    sb ->> -ty: Continuar transferencia
  end

  ty ->> ty: Resolver firmante destino
  ty ->> ty: Aceptar transferencia

  alt Acci√≥n (s√≠ncrona)
    ty ->>+ sb: Llamar a acci√≥n
    sb ->> sb: Procesar acci√≥n
    sb -->>- ty: Respuesta de acci√≥n
  end

  alt Cr√©dito (as√≠ncrono)
    ty ->>+ tb: Llamar a cr√©dito
    tb ->> tb: Procesar cr√©dito
    tb ->> -ty: Continuar transferencia
  end

  ty ->>+ sb: Consultar estado
  sb -->>- ty: Respuesta de estado

  ty ->>+ tb: Consultar estado
  tb -->>- ty: Respuesta de estado
```
</Tab>
 <Tab title="Flujo sin Signer Registrado">
 ```mermaid
sequenceDiagram
  autonumber
  participant sb as Banco Origen
  participant ty as TransfiYa
  participant tb as Banco Destino

  sb ->>+ ty: Crear transferencia
  ty ->> ty: Validar reglas de negocio
  ty -->>- sb: Transferencia creada

  alt D√©bito (as√≠ncrono)
    ty ->>+ sb: Llamar a d√©bito
    sb ->> sb: Procesar d√©bito
    sb ->> -ty: Continuar transferencia
  end

  ty ->> ty: Resolver firmante destino

  alt Onboarding (as√≠ncrono)
    ty ->>+ tb: Consultar estado (PENDING)
    tb -->> ty: Confirmar recepci√≥n
    tb ->> tb: Validar cuenta
    tb ->>+ ty: Crear firmante
    ty -->>- tb: Respuesta de creaci√≥n
    tb ->> -ty: Aceptar transferencia
  end

  alt Acci√≥n (s√≠ncrona)
    ty ->>+ sb: Llamar a acci√≥n
    sb ->> sb: Procesar acci√≥n
    sb -->>- ty: Respuesta de acci√≥n
  end

  alt Cr√©dito (as√≠ncrono)
    ty ->>+ tb: Llamar a cr√©dito
    tb ->> tb: Procesar cr√©dito
    tb ->> -ty: Continuar transferencia
  end

  ty ->>+ sb: Consultar estado
  sb -->>- ty: Respuesta de estado

  ty ->>+ tb: Consultar estado
  tb -->>- ty: Respuesta de estado
```
 </Tab>
</Tabs>

Crear una transferencia hacia una cuenta bancaria se realiza de la misma forma que cualquier otra transferencia en TransfiYa. La √∫nica diferencia es que, en el campo `target`, no se utiliza un **alias**, sino una **referencia directa a la cuenta bancaria**.

<Info>
Este tipo de transferencia es √∫til cuando se conoce directamente el n√∫mero de cuenta, tipo de cuenta y banco destino, sin necesidad de pasar por el directorio de alias.
</Info>

<Tabs>
    <Tab title="Request">
    ```json
    curl -X POST \
-H "Content-Type: application/json" \
-H "x-api-key: <API_KEY>" \
-H "Authorization: Bearer <TOKEN>" \
-d '{
"source": "wXxwpxB32saqfmfMxAQD4SVWWhhn6akLC2",
  "target": "svgs:10010010001@bbva.co",
  "amount": "100.00",
  "symbol": "$tin",
  "labels": {
    "type": "SEND",
    "domain": "tin",
    "description": "Salary for March",
    "sourceChannel": "APP",
"tx_id": "20250114890915944TFY123456789012345",
"received": "2025-01-14T20:40:57.322-05:00",
"dispatched": "2025-01-14T20:40:58.322-05:00",
"deviceFingerPrint": {
  "hash": "26fff5af6441f8e15a71e8d62c361714484b1b308c99e8eb68ca85e2a7e0dc58",
  "ipAddress": "2001:0db8:85a3:0000:0000:8a2e:0370:7334",
  "country": "Colombia",
  "city": "Bogot√°",
  "mobileDevice": "990000862471854",
  "SIMCardId": "8991101200003204510",
  "model": "Huawei Mate 20 Pro",
  "operator": "Bharti Airtel Limited"
}
}
}' "<TRANSFIYA URL>/v1/transfer"
    ```
    </Tab>
    <Tab title="Response">
    ```json
    {
  "source": "wXxwpxB32saqfmfMxAQD4SVWWhhn6akLC2",
  "target": "wfvmRir8XxRtoEuUBDkv3BP4T7BQezwm1f",
  "amount": "100.00",
  "symbol": "$tin",
  "labels": {
    "hash": "PENDING",
    "type": "SEND",
    "domain": "tin",
    "flowId": "Lf13jsK83omPv3bOt",
    "status": "PENDING",
    "tx_ref": "Lf13jsK83omPv3bOt",
   "received": "2025-01-14T20:40:57.322-05:00",
   "dispatched": "2025-01-14T20:40:57.322-05:00",
    "created": "2025-01-14T20:40:57.322-05:00",
    "updated": "2025-01-14T20:40:57.322-05:00",
    "description": "DEV - SEND trx 01",
    "sourceChannel": "APP",
    "deviceFingerPrint": {
      "city": "Bogot√°",
      "hash": "26fff5af6441f8e15a71e8d62c361714484b1b308c99e8eb68ca85e2a7e0dc58",
      "model": "Huawei Mate 20 Pro",
      "country": "Colombia",
      "operator": "Bharti Airtel Limited",
      "SIMCardId": "8991101200003204510",
      "ipAddress": "2001:0db8:85a3:0000:0000:8a2e:0370:7334",
      "mobileDevice": "990000862471854"
    }
  },
  "snapshot": {
    "source": {
      "signer": {
        "handle": "wXxwpxB32saqfmfMxAQD4SVWWhhn6akLC2",
        "labels": {
          "name": "Jorge Alejandro Fernandez Garcia",
        "proprietary": "CC",
	        "identification": "1010101010",
        "bankAccountType": "SVGS",
        "bankAccountNumber": "12345654321",
	      "bankId": "891234918",
         "targetSpbviCode": "TFY",
        }
      },
    },
    "target": {
      "signer": {
       "handle": "wfvmRir8XxRtoEuUBDkv3BP4T7BQezwm1f",
        "labels": {
          "name": "Jorge Alejandro Fernandez Garcia",
        "proprietary": "CC",
	        "identification": "1010101010",
         "bankAccountType": "SVGS",
         "bankAccountNumber": "12345654321",
	      "bankId": "891234918",
         "targetSpbviCode": "TFY",

        }
      },
    }
  },
  "error": {
    "code": 0,
    "message": "Success"
  },
  "action_id": "35de4d3d-3aba-4fb3-b110-d004ce2aabb2",
  "id": "35de4d3d-3aba-4fb3-b110-d004ce2aabb2"
}
```
    </Tab>
</Tabs>    